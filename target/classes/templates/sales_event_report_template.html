<!DOCTYPE html>
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Sales Report</title>
    <link href="src/main/resources/static/css/sales_event-report.css" rel="stylesheet"/>
</head>
<body>
<div class="container" th:if="${#maps.isEmpty(grouped_data)}">
    <div class="topic">Sales Report</div>
    <table>
        <tr class="header-row">
            <th>ID</th>
            <th>Product</th>
            <th>Qty Sold</th>
            <th>S.P</th>
            <th>C.P</th>
            <th>Left</th>
            <th>Date</th>
            <th>Location</th>
        </tr>
        <tr th:each="row:${data}">
            <td th:text="${#strings.substring(row['id'], 0, 4)}+' ...'"></td>
            <td th:text="${row['product']}"></td>
            <td th:text="${row['quantitySold']}"></td>
            <td th:text="${row['salesPrice']}"></td>
            <td th:text="${row['costPrice']}"></td>
            <td th:text="${row['left']}"></td>
            <td th:text="${row['date']}"></td>
            <td th:text="${row['location']}"></td>
        </tr>
    </table>
    <div class="topic">Key Indicators</div>
    <div class="definitions">
        <ul>
            <li class="list-items">ID: Report event Identifier</li>
            <li class="list-items">Qty Sold: Quantity Sold</li>
            <li class="list-items">C.P: Cost Price</li>
            <li class="list-items">S.P: Sales Price</li>
        </ul>
    </div>
    <br>
    <br>

</div>
<div class="container" th:unless="${#maps.isEmpty(grouped_data)}" th:with="metrics=${grouped_data['SalesMetrics'][0]}">
    <div class="topic" th:text="${metrics['category']+' Sales Report'}">Sales Report</div>
    <table>
        <tr class="header-row">
            <th>Id</th>
            <th>Product</th>
            <th>Qty Sold</th>
            <th>S.P</th>
            <th>C.P</th>
            <th>Left</th>
            <th>Date</th>
            <th>Location</th>
        </tr>
        <tr th:each="row:${grouped_data['SalesEvent']}">
            <td th:text="${#strings.substring(row['id'], 0, 4)}+' ...'"></td>
            <td th:text="${row['product']}"></td>
            <td th:text="${row['quantitySold']}"></td>
            <td th:text="${row['salesPrice']}"></td>
            <td th:text="${row['costPrice']}"></td>
            <td th:text="${row['left']}"></td>
            <td th:text="${row['date']}"></td>
            <td th:text="${row['location']}"></td>
        </tr>
    </table>
    <div class="topic">Sales Key Indicators</div>
    <div class="definitions">
        <ul>
            <li class="list-items">ID: Report event Identifier</li>
            <li class="list-items">Qty Sold: Quantity Sold</li>
            <li class="list-items">C.P: Cost Price</li>
            <li class="list-items">S.P: Sales Price</li>
        </ul>
    </div>
    <div class="topic">Products Availability Metrics</div>
    <div class="definitions" th:if="${grouped_data['DialImagePath'] == null}">
        <span>No record!</span>
    </div>
    <div class="product-dial-container" th:unless="${grouped_data['DialImagePath'] == null}">
        <img class="product-dial-image"
             th:each="dialImagePath:${grouped_data['DialImagePath']}"
             th:src="${dialImagePath['path']}"
             alt="dial chart"
        />
    </div>
    <div class="topic">Trader Information</div>
    <table class="single-detail-table" th:with="trader=${grouped_data['Trader'][0]}">
        <tr>
            <td class="desc-cell">Id</td>
            <td th:text="${trader['id']}"></td>
        </tr>
        <tr>
            <td class="desc-cell">Name</td>
            <td th:text="${trader['name']}"></td>
        </tr>
        <tr>
            <td class="desc-cell">Email</td>
            <td th:text="${trader['email']}"></td>
        </tr>
        <tr>
            <td class="desc-cell">Phone</td>
            <td th:text="${trader['phone']}"></td>
        </tr>
        <tr>
            <td class="desc-cell">Address</td>
            <td th:text="${trader['address']}"></td>
        </tr>
    </table>
    <div class="topic">Customers Information</div>
    <table>
        <tr class="header-row">
            <th>Id</th>
            <th>Name</th>
            <th>Phone</th>
            <th>Email</th>
            <th>Address</th>
        </tr>
        <tr th:each="row:${grouped_data['Customer']}">
            <td th:text="${#strings.substring(row['id'], 0, 4)}+' ...'"></td>
            <td th:text="${row['name']}"></td>
            <td th:text="${row['phone']}"></td>
            <td th:text="${row['email']}"></td>
            <td th:text="${row['address']}"></td>
        </tr>
    </table>
    <div class="topic">Credit Information</div>
    <div class="definitions" th:if="${grouped_data['Credit'] == null}">
        <span>No product purchased on credit!</span>
    </div>
    <table th:unless="${grouped_data['Credit'] == null}">
        <tr class="header-row">
            <th>ID</th>
            <th>CustomerId</th>
            <th>Debt</th>
            <th>Qty</th>
            <th>Date</th>
        </tr>
        <tr th:each="credit:${grouped_data['Credit']}">
            <td th:text="${#strings.substring(credit['id'], 0, 4)}+' ...'"></td>
            <td th:text="${#strings.substring(credit['customerId'], 0, 4)}+' ...'"></td>
            <td th:text="${credit['salesPrice']}"></td>
            <td th:text="${credit['quantity']}"></td>
            <td th:text="${credit['date']}"></td>
        </tr>
    </table>
    <div class="topic">Expenditures</div>
    <div class="definitions" th:if="${grouped_data['Expenditure'] == null}">
        <span>No expenditure have been made!</span>
    </div>
    <div class="exp-list-container" th:unless="${grouped_data['Expenditure'] == null}">
        <ul class="exp-list" >
            <li class="exp-item" th:each="exp:${grouped_data['Expenditure']}">
                <table class="single-detail-table">
                    <tr>
                        <td class="desc-cell">Date</td>
                        <td th:text="${exp['date']}"></td>
                    </tr>
                    <tr>
                        <td class="desc-cell" th:colspan="2" style="text-align: center;">Expenses</td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <table class="exp-table" th:with="expenses=${exp['expenses']}">
                                <tr class="header-row">
                                    <th>Description</th>
                                    <th>Amount</th>
                                </tr>
                                <tr th:each="expense:${expenses}">
                                    <td th:text="${expense['description']}"></td>
                                    <td th:text="${expense['amount']}"></td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td class="desc-cell">Total</td>
                        <td th:text="${exp['total']}"></td>
                    </tr>
                </table>
            </li>
        </ul>
    </div>
    <div class="topic" th:text="${metrics['category']+' Sales Metrics Information'}">Sales Metrics</div>
    <table class="single-detail-table">
        <tr>
            <td class="desc-cell">Total Cost</td>
            <td th:text="${metrics['totalCost']}"></td>
        </tr>
        <tr>
            <td class="desc-cell">Total Sales</td>
            <td th:text="${metrics['totalSales']}"></td>
        </tr>
        <tr>
            <td class="desc-cell">Total Profit</td>
            <td th:text="${metrics['totalProfit']}"></td>
        </tr>
    </table>
</div>
<div id="footer">
    Powered by Sales Diary Team.
</div>

</body>
</html>