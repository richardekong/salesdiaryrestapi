<!DOCTYPE html>
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Sales Report</title>
    <link href="src/main/resources/static/css/sales_event-report.css" rel="stylesheet"/>
</head>
<body>
<div class="container" th:if="${#maps.isEmpty(grouped_data)}">
    <div class="topic">Sales Report</div>
    <table>
        <tr class="header-row">
            <th>ID</th>
            <th>Product</th>
            <th>Qty Sold</th>
            <th>S.P</th>
            <th>C.P</th>
            <th>Left</th>
            <th>Date</th>
            <th>Location</th>
        </tr>
        <tr th:each="row:${data}">
            <td th:text="${#strings.substring(row['id'], 0, 4)}+' ...'"></td>
            <td th:text="${row['product']}"></td>
            <td th:text="${row['quantitySold']}"></td>
            <td th:text="${row['salesPrice']}"></td>
            <td th:text="${row['costPrice']}"></td>
            <td th:text="${row['left']}"></td>
            <td th:text="${row['date']}"></td>
            <td th:text="${row['location']}"></td>
        </tr>
    </table>
    <div class="topic">Key Indicators</div>
    <div class="definitions">
        <ul>
            <li class="list-items">ID: Report event Identifier</li>
            <li class="list-items">Qty Sold: Quantity Sold</li>
            <li class="list-items">C.P: Cost Price</li>
            <li class="list-items">S.P: Sales Price</li>
        </ul>
    </div>
    <br>
    <br>

</div>
<div class="container" th:unless="${#maps.isEmpty(grouped_data)}" th:with="metrics=${grouped_data['SalesMetrics'][0]}">
    <div class="topic" th:text="${metrics['category']+' Sales Report'}">Sales Report</div>
    <table>
        <tr class="header-row">
            <th>Id</th>
            <th>Product</th>
            <th>Qty Sold</th>
            <th>S.P</th>
            <th>C.P</th>
            <th>Left</th>
            <th>Date</th>
            <th>Location</th>
        </tr>
        <tr th:each="row:${grouped_data['SalesEvent']}">
            <td th:text="${#strings.substring(row['id'], 0, 4)}+' ...'"></td>
            <td th:text="${row['product']}"></td>
            <td th:text="${row['quantitySold']}"></td>
            <td th:text="${row['salesPrice']}"></td>
            <td th:text="${row['costPrice']}"></td>
            <td th:text="${row['left']}"></td>
            <td th:text="${row['date']}"></td>
            <td th:text="${row['location']}"></td>
        </tr>
    </table>
    <div class="topic">Sales Key Indicators</div>
    <div class="definitions">
        <ul>
            <li class="list-items">ID: Report event Identifier</li>
            <li class="list-items">Qty Sold: Quantity Sold</li>
            <li class="list-items">C.P: Cost Price</li>
            <li class="list-items">S.P: Sales Price</li>
        </ul>
    </div>
    <div class="topic">Products Availability Metrics</div>
    <div class="definitions" th:if="${grouped_data['DialImagePath'] == null}">
        <span>No record!</span>
    </div>
    <div class="product-dial-container" th:unless="${grouped_data['DialImagePath'] == null}">
        <img class="product-dial-image"
             th:each="dialImagePath:${grouped_data['DialImagePath']}"
             th:src="${dialImagePath['path']}"
             alt="dial chart"
        />
    </div>
    <div class="topic">Trader Information</div>
    <table class="single-detail-table" th:with="trader=${grouped_data['Trader'][0]}">
        <tr>
            <td class="right-cell">Id</td>
            <td th:text="${trader['id']}"></td>
        </tr>
        <tr>
            <td class="right-cell">Name</td>
            <td th:text="${trader['name']}"></td>
        </tr>
        <tr>
            <td class="right-cell">Email</td>
            <td th:text="${trader['email']}"></td>
        </tr>
        <tr>
            <td class="right-cell">Phone</td>
            <td th:text="${trader['phone']}"></td>
        </tr>
        <tr>
            <td class="right-cell">Address</td>
            <td th:text="${trader['address']}"></td>
        </tr>
    </table>
    <div class="topic">Customers Information</div>
    <table>
        <tr class="header-row">
            <th>Id</th>
            <th>Name</th>
            <th>Phone</th>
            <th>Email</th>
            <th>Address</th>
        </tr>
        <tr th:each="row:${grouped_data['Customer']}">
            <td th:text="${#strings.substring(row['id'], 0, 4)}+' ...'"></td>
            <td th:text="${row['name']}"></td>
            <td th:text="${row['phone']}"></td>
            <td th:text="${row['email']}"></td>
            <td th:text="${row['address']}"></td>
        </tr>
    </table>
    <div class="topic" th:text="${metrics['category']+' Sales Metrics Information'}">Sales Metrics</div>
    <table class="single-detail-table">
        <tr>
            <td class="right-cell">Total Cost</td>
            <td th:text="${metrics['totalCost']}"></td>
        </tr>
        <tr>
            <td class="right-cell">Total Sales</td>
            <td th:text="${metrics['totalSales']}"></td>
        </tr>
        <tr>
            <td class="right-cell">Total Profit</td>
            <td th:text="${metrics['totalProfit']}"></td>
        </tr>
    </table>
</div>
<div id="footer">
    Powered by Sales Diary Team.
</div>

</body>
</html>