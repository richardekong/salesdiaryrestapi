<!DOCTYPE html>
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Sales Report</title>
    <style>

        body {
            padding: 20px;
        }

        table {
            border: 1px solid #663399;
            width: 100%;
            padding: 5px;
        }

        .single-detail-table .right-cell {
            background-color: black;
            color: white;
            font-weight: bold;
            padding: 10px;
            width: 20%;
            text-align: left;
        }

        th {
            color: white;
            font-size: large;
        }

        tr {
            border: 1px solid #663399;
            background-color: white;
            padding: 10px;
        }

        tr, td {
            font-size: medium;
            padding: 10px;
        }

        .header-row th {
            background-color: black;
            color: white;
        }

        tr:nth-child(odd) td {
            background-color: #663399;
            color: white;
            text-align: center;
        }

        tr:nth-child(even) td {
            background-color: #C690FC;
            color: black;
            text-align: center;
        }

        .topic {
            background-color: black;
            color: white;
            font-size: 30px;
            font-weight: bold;
            display: flex;
            justify-content: center;
            text-align: center;
            padding: 15px;
        }

        .list-items {
            font-size: 25px;
        }

        .container {
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
            font-family: 'Bell MT', sans-serif;
            padding: 20px;
        }

        #summary {
            background-color: #663399;
            font-family: 'Bell MT', sans-serif;
            padding: 20px;
            color: white;
            font-size: x-large;
        }

        .definitions {
            background-color: #663399;
            font-family: 'Bell MT', sans-serif;
            padding: 20px;
            color: white;
            font-size: large;

        }

        #summary ul {
            list-style-type: none;
        }

        #summary ul li span {
            margin-right: 0;
        }

        #summary ul li b {
            margin-left: 60%;
        }

        #footer {
            background-color: #663399;
            color: white;
            font-size: smaller;
            height: 50%;
            padding: 20px;
        }

    </style>
</head>
<body>
<div class="container" th:if="${#maps.isEmpty(grouped_data)}">
    <div class="topic">Sales Report</div>
    <table>
        <tr class="header-row">
            <th>ID</th>
            <th>Product</th>
            <th>Qty Sold</th>
            <th>S.P</th>
            <th>C.P</th>
            <th>Left</th>
            <th>Date</th>
            <th>Location</th>
        </tr>
        <tr th:each="row:${data}">
            <td th:text="${#strings.substring(row['id'], 0, 4)}+' ...'"></td>
            <td th:text="${row['product']}"></td>
            <td th:text="${row['quantitySold']}"></td>
            <td th:text="${row['salesPrice']}"></td>
            <td th:text="${row['costPrice']}"></td>
            <td th:text="${row['left']}"></td>
            <td th:text="${row['date']}"></td>
            <td th:text="${row['location']}"></td>
        </tr>
    </table>
    <div class="topic">Key Indicators</div>
    <div class="definitions">
        <ul>
            <li class="list-items">ID: Report event Identifier</li>
            <li class="list-items">Qty Sold: Quantity Sold</li>
            <li class="list-items">C.P: Cost Price</li>
            <li class="list-items">S.P: Sales Price</li>
        </ul>
    </div>
    <br>
    <br>

</div>
<div class="container" th:unless="${#maps.isEmpty(grouped_data)}" th:with="metrics=${grouped_data['SalesMetrics'][0]}">
    <div class="topic"  th:text="${metrics['category']+' Sales Report'}">Sales Report</div>
    <table>
        <tr class="header-row">
            <th>Id</th>
            <th>Product</th>
            <th>Qty Sold</th>
            <th>S.P</th>
            <th>C.P</th>
            <th>Left</th>
            <th>Date</th>
            <th>Location</th>
        </tr>
        <tr th:each="row:${grouped_data['SalesEvent']}">
            <td th:text="${#strings.substring(row['id'], 0, 4)}+' ...'"></td>
            <td th:text="${row['product']}"></td>
            <td th:text="${row['quantitySold']}"></td>
            <td th:text="${row['salesPrice']}"></td>
            <td th:text="${row['costPrice']}"></td>
            <td th:text="${row['left']}"></td>
            <td th:text="${row['date']}"></td>
            <td th:text="${row['location']}"></td>
        </tr>
    </table>
    <div class="topic">Sales Key Indicators</div>
    <div class="definitions">
        <ul>
            <li class="list-items">ID: Report event Identifier</li>
            <li class="list-items">Qty Sold: Quantity Sold</li>
            <li class="list-items">C.P: Cost Price</li>
            <li class="list-items">S.P: Sales Price</li>
        </ul>
    </div>
    <div class="topic">Trader Information</div>
    <table class="single-detail-table" th:with="trader=${grouped_data['Trader'][0]}">
        <tr>
            <td class="right-cell">Id</td>
            <td th:text="${trader['id']}"></td>
        </tr>
        <tr>
            <td class="right-cell">Name</td>
            <td th:text="${trader['name']}"></td>
        </tr>
        <tr>
            <td class="right-cell">Email</td>
            <td th:text="${trader['email']}"></td>
        </tr>
        <tr>
            <td class="right-cell">Phone</td>
            <td th:text="${trader['phone']}"></td>
        </tr>
        <tr>
            <td class="right-cell">Address</td>
            <td th:text="${trader['address']}"></td>
        </tr>
    </table>
    <div class="topic">Customers Information</div>
    <table>
        <tr class="header-row">
            <th>Id</th>
            <th>Name</th>
            <th>Phone</th>
            <th>Email</th>
            <th>Address</th>
        </tr>
        <tr th:each="row:${grouped_data['Customer']}">
            <td th:text="${#strings.substring(row['id'], 0, 4)}+' ...'"></td>
            <td th:text="${row['name']}"></td>
            <td th:text="${row['phone']}"></td>
            <td th:text="${row['email']}"></td>
            <td th:text="${row['address']}"></td>
        </tr>
    </table>
    <div class="topic" th:text="${metrics['category']+' Sales Metrics Information'}">Sales Metrics</div>
    <table class="single-detail-table">
        <tr>
            <td class="right-cell">Total Cost</td>
            <td th:text="${metrics['totalCost']}"></td>
        </tr>
        <tr>
            <td class="right-cell">Total Sales</td>
            <td th:text="${metrics['totalSales']}"></td>
        </tr>
        <tr>
            <td class="right-cell">Total Profit</td>
            <td th:text="${metrics['totalProfit']}"></td>
        </tr>
    </table>
</div>
<div id="footer">
    Powered by Sales Diary Team.
</div>

</body>
</html>